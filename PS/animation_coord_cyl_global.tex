%\def\nbIMAGES{36}
\begin{animateinline}[autoplay,loop,controls]{10}
    \multiframe{\nbIMAGES}{rangle=0+10}{
\begin{tikzpicture}[scale=6]

%% Les valeurs utiles

\ifthenelse{\rangle < 301}{
  \pgfmathsetmacro{\THETA}{60+\rangle}
}{
  \pgfmathsetmacro{\THETA}{\rangle-300}
}
\pgfmathsetmacro{\Z}{0.3+0.15*cos(\rangle)}
\pgfmathsetmacro{\coeff}{0.3}
\pgfmathsetmacro{\R}{0.3+0.2*cos(\rangle)}
\pgfmathsetmacro{\X}{\R*cos(\THETA)}
\pgfmathsetmacro{\Y}{\R*sin(\THETA)}
\pgfmathsetmacro{\UNIT}{0.15}

\coordinate (O)   at (0,0,0) ;
\coordinate (M) at (\Y,\Z,\X) ;
\coordinate (Mr) at ({\Y+\UNIT*sin(\THETA)},\Z,{\X+\UNIT*cos(\THETA)}) ;
\coordinate (Mt) at ({\Y+\UNIT*cos(\THETA)},\Z,{\X-\UNIT*sin(\THETA)}) ;
\coordinate (Mz) at (\Y,\Z+\UNIT,\X) ;
\coordinate (H) at (0,\Z,0) ;
\coordinate (P) at (\Y,0,\X) ;
\coordinate (Px) at (0,0,\X) ;
\coordinate (Py) at (\Y,0,0) ;
\coordinate (P1) at ($0.4*(P)$) ;
\coordinate (P1perp) at (0.4*\Y-0.3*0.4*\X,0,0.4*\X+0.3*0.4*\Y) ;
\coordinate (X) at (0,0,0.2) ;
\coordinate (Xperp) at (0.1,0,0.2) ;

%% Vecteurs
  \draw [->] (-0.2,0,0) -- (0.8,0,0) node [right] {$y$} ;
  \draw [->] (0,-0.2,0) -- (0,0.8,0) node [left] {$z$} ;
  \draw [->] (0,0,-0.2) -- (0,0,0.8) node [left] {$x$} ;
  \draw [ultra thick,->] (O) -- (M) node [pos=0.5,above left=-2pt] {$\vect{OM}$} ;
  \draw [ultra thick,->] (M) -- (Mr) node [right] {\ver} ;
  \draw [ultra thick,->] (M) -- (Mt) node [above right=-4pt] {\vetheta} ;
  \draw [ultra thick,->] (M) -- (Mz) node [right] {\vez} ;
  \draw [dashed] (O) -- (P) -- (M)   node [pos=0.5,right] {$z$}  ;
  \draw [dashed] (O) -- (H) node [left] {H} 
  		-- (M) node [pos=0.5, above] {$r$} ;
  \filldraw[black] (H) circle(0.3pt) ;
  \filldraw[black] (P) circle(0.3pt) node [below] {$P$};
  \filldraw[black] (O) circle(0.3pt) node [left] {$O$};
  \draw [dotted] (Px) -- (P) -- (Py) ;

%% Angle
%  \draw [thick,->] (X) .. controls (Xperp) and (P1perp) .. (P1)
%    node [below,pos=0.5] {$\theta$};
\draw [thick,->] (0,0,\UNIT) node [below right=-2pt] {$\theta$}
   \foreach \t in {0,10,...,\THETA} {
     -- ({\UNIT*sin(\t)},0,{\UNIT*cos(\t)})
   }
   ;


\end{tikzpicture}
}
\end{animateinline}
